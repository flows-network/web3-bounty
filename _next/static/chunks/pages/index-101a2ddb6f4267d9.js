(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2447)}])},2447:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(5893);n(894),n(6745);var a=n(9008),c=n.n(a),i=n(7294),o=n(7977),r=n(5005);function l(e){let{done:t,showAlert:n}=e,[a,c]=(0,i.useState)(!1),[l,d]=(0,i.useState)(!1),[u,h]=(0,i.useState)(!1);async function m(){d(!0);try{let e=await window.ethereum.request({method:"eth_requestAccounts"});if(e&&e.length>0)t(e),h(!0);else throw"Can't get accounts"}catch(e){n({variant:"danger",message:e.toString()})}finally{d(!1)}}return(0,i.useEffect)(()=>{void 0!==window.ethereum&&window.ethereum.isMetaMask&&c(!0)}),u?(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(o.Z,{bg:"success",children:"Connected with MetaMask"})}):a?(0,s.jsx)(r.Z,{onClick:m,variant:"primary",disabled:l,children:"Connect with MetaMask"}):(0,s.jsx)(r.Z,{variant:"outline-secondary",disabled:!0,children:"MetaMask is not installed"})}var d=n(8809);function u(e){let{params:t,hide:n}=e;return setTimeout(()=>{n()},5e3),(0,s.jsx)("div",{className:"position-absolute",style:{top:10},children:(0,s.jsx)(d.Z,{variant:t.variant,onClose:()=>n(),dismissible:!0,children:t.message})})}var h=n(478),m=n(682),w=n(4051),f=n(1555),x=n(1330);async function b(e,t){let n=[];for(let s=0;s<t.length;s++){let a=t[s],c=await fetch("".concat("https://code.flows.network/lambda/dElmOPdyu2","?account=").concat(e,"&table=").concat(a));if(!c.ok)throw"Can not search data for '".concat(a,"'");let i=await c.json();i&&i.length>0&&n.push({name:a,fields:i[0].fields})}return n}let p=[{name:"GitHub",icon:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",icon_width:45,oauth:"https://github.com/apps/web3bountydemo/installations/new?state={account}",username_field:"Login",connected:null},{name:"Twitter",icon:"https://www.wellybox.com/wp-content/uploads/2023/02/pngkey.com-twitter-logo-png-transparent-27646.png",icon_width:33,oauth:"".concat("https://code.flows.network/lambda/cmdMywuHov","?account={account}"),username_field:"Username",connected:null}];function g(e){let{account:t,showAlert:n}=e,[a,c]=(0,i.useState)(null),o=(0,i.useRef)(a);o.current=a;let[l,d]=(0,i.useState)(null);async function u(e){setTimeout(async()=>{await g(e),o.current&&u(e)},1e3)}async function g(e){try{let n=await b(t,e);n&&n.find(e=>e.name==o.current)&&c(null),d(n)}catch(e){n({variant:"danger",message:e.toString()})}}return((0,i.useEffect)(()=>{t&&g(p.map(e=>e.name))},[t]),l)?(0,s.jsx)(h.Z,{gap:4,className:"col-md-5 mx-auto my-5",children:p.map(e=>(e.connected=e.connected||l.find(t=>t.name===e.name),(0,s.jsx)(m.Z,{className:"".concat(e.connected?"bg-success border-success":"bg-secondary border-secondary"," border border-opacity-25 bg-gradient bg-opacity-25 rounded p-2"),children:(0,s.jsxs)(w.Z,{className:"align-items-center",children:[(0,s.jsx)(f.Z,{xs:2,children:(0,s.jsx)("div",{className:"d-flex align-items-center justify-content-center border border-1 rounded-2 overflow-hidden bg-white",style:{width:50,height:50},children:(0,s.jsx)(x.Z,{width:e.icon_width,src:e.icon})})}),(0,s.jsx)(f.Z,{xs:8,style:{fontSize:"0.875em"},children:e.connected?(0,s.jsxs)("span",{children:["Connected to ",(0,s.jsx)("em",{children:e.connected.fields[e.username_field]})]}):"Please connect with your ".concat(e.name," account")}),(0,s.jsx)(f.Z,{xs:2,className:"text-center",children:e.connected?(0,s.jsx)("i",{className:"fs-4 bi bi-shield-check"}):(0,s.jsx)(r.Z,{onClick:()=>{var t;c(t=e.name),u([t])},href:e.oauth.replace("{account}",t),target:"_blank",variant:"primary",size:"sm",className:"rounded-circle",disabled:null!=a,children:a==e.name?(0,s.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status"}):(0,s.jsx)("i",{className:"bi bi-plus-lg"})})})]})},e.name)))}):null}let j=()=>{let[e,t]=(0,i.useState)([]),[n,a]=(0,i.useState)(!1),[o,r]=(0,i.useState)(null);async function d(e){t(e)}function x(e){r(e),a(!0)}return(0,s.jsxs)("main",{children:[(0,s.jsxs)(c(),{children:[(0,s.jsx)("title",{children:"web3-bounty"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(w.Z,{className:"align-items-center position-relative",style:{minHeight:"100vh"},children:[n&&(0,s.jsx)(u,{params:o,hide:function(){a(!1)}}),(0,s.jsx)(f.Z,{children:(0,s.jsxs)(m.Z,{style:{paddingBottom:"5em"},children:[(0,s.jsxs)(h.Z,{gap:2,className:"col-md-5 mx-auto",children:[(0,s.jsx)("h1",{className:"my-3 fw-bold text-center",children:"Web3 Bounty"}),(0,s.jsx)(l,{done:d,showAlert:x})]}),(0,s.jsx)(g,{account:e[0],showAlert:x})]})})]})})]})};var y=j}},function(e){e.O(0,[774,622,392,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);