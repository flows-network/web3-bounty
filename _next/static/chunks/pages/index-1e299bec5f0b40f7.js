(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2447)}])},2447:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return y}});var s=n(5893);n(894),n(6745);var a=n(9008),i=n.n(a),c=n(7294),r=n(7977),l=n(5005);function o(e){let{done:t,showAlert:n}=e,[a,i]=(0,c.useState)(!1),[o,u]=(0,c.useState)(!1),[d,h]=(0,c.useState)(!1);async function m(){u(!0);try{let e=await window.ethereum.request({method:"eth_requestAccounts"});if(e&&e.length>0)t(e),h(!0);else throw"Can't get accounts"}catch(e){n({variant:"danger",message:e.toString()})}finally{u(!1)}}return(0,c.useEffect)(()=>{void 0!==window.ethereum&&window.ethereum.isMetaMask&&i(!0)}),d?(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(r.Z,{bg:"success",children:"Connected with MetaMask"})}):a?(0,s.jsx)(l.Z,{onClick:m,variant:"primary",disabled:o,children:"Connect with MetaMask"}):(0,s.jsx)(l.Z,{variant:"outline-secondary",disabled:!0,children:"MetaMask is not installed"})}var u=n(8809);function d(e){let{params:t,hide:n}=e;return setTimeout(()=>{n()},5e3),(0,s.jsx)("div",{className:"position-absolute",style:{top:10},children:(0,s.jsx)(u.Z,{variant:t.variant,onClose:()=>n(),dismissible:!0,children:t.message})})}var h=n(478),m=n(682),f=n(4051),b=n(1555),x=n(1330);async function g(e){let t=await fetch("https://code.flows.network/lambda/dElmOPdyu2?account=".concat(e)),n=await t.json();return n&&n.length>0?[{name:"github",fields:n[0].fields}]:[]}let j=[{name:"github",label:"GitHub",icon:"https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",oauth:"https://github.com/apps/web3bountydemo/installations/new?state={account}",username_field:"Login"}];function w(e){let{account:t,showAlert:n}=e,[a,i]=(0,c.useState)(null),r=(0,c.useRef)(a);r.current=a;let[o,u]=(0,c.useState)(null),d=(0,c.useRef)(o);async function w(){setTimeout(async()=>{await p(),r.current&&w()},1e3)}async function p(){try{u(await g(t)),d.current&&d.current.find(e=>{e.name,r.current})&&i(null)}catch(e){n({variant:"danger",message:e.toString()})}}return d.current=o,((0,c.useEffect)(()=>{t&&p()},[t]),o)?(0,s.jsx)(h.Z,{gap:4,className:"col-md-5 mx-auto my-5",children:j.map(e=>{let n=o.find(t=>t.name===e.name);return(0,s.jsx)(m.Z,{className:"".concat(n?"bg-success border-success":"bg-secondary border-secondary"," border border-opacity-25 bg-gradient bg-opacity-25 rounded p-2"),children:(0,s.jsxs)(f.Z,{className:"align-items-center",children:[(0,s.jsx)(b.Z,{sm:2,children:(0,s.jsx)(x.Z,{width:50,src:e.icon,thumbnail:!0,fluid:!0})}),(0,s.jsx)(b.Z,{sm:8,style:{fontSize:"0.875em"},children:n?(0,s.jsxs)("span",{children:["Connected to ",(0,s.jsx)("em",{children:n.fields[e.username_field]})]}):"Please connect with your ".concat(e.label," account")}),(0,s.jsx)(b.Z,{sm:2,className:"text-center",children:n?(0,s.jsx)("i",{className:"fs-4 bi bi-shield-check"}):(0,s.jsx)(l.Z,{onClick:()=>{i(e.name),w()},href:e.oauth.replace("{account}",t),target:"_blank",variant:"primary",size:"sm",className:"rounded-circle",disabled:null!=a,children:a?(0,s.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status"}):(0,s.jsx)("i",{className:"bi bi-plus-lg"})})})]})},e.name)})}):null}let p=()=>{let[e,t]=(0,c.useState)([]),[n,a]=(0,c.useState)(!1),[r,l]=(0,c.useState)(null);async function u(e){t(e)}function x(e){l(e),a(!0)}return(0,s.jsxs)("main",{children:[(0,s.jsxs)(i(),{children:[(0,s.jsx)("title",{children:"web3-bounty"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"})]}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(f.Z,{className:"align-items-center position-relative",style:{minHeight:"100vh"},children:[n&&(0,s.jsx)(d,{params:r,hide:function(){a(!1)}}),(0,s.jsx)(b.Z,{children:(0,s.jsxs)(m.Z,{style:{paddingBottom:"5em"},children:[(0,s.jsxs)(h.Z,{gap:2,className:"col-md-5 mx-auto",children:[(0,s.jsx)("h1",{className:"my-3 fw-bold text-center",children:"Web3 Bounty"}),(0,s.jsx)(o,{done:u,showAlert:x})]}),(0,s.jsx)(w,{account:e[0],showAlert:x})]})})]})})]})};var y=p}},function(e){e.O(0,[774,622,392,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);